syntax = "proto3";

package warehouse;

option go_package = "github.com/CrabStash/crab-stash-protofiles/warehouse/proto";

// GetInfo
message GetInfoRequest {
  string warehouseID = 1; // @gotags: valid:"required,minstringlength(1)"
}

message GetInfoResponse {
  string name = 1;
  string desc = 2;
  string logo = 3;
  string owner = 4;
  bool isPhysical = 5;
  int64 capacity = 6;
}

// UpdateWarehouse
message UpdateRequest {
  string warehouseID = 1; // @gotags: valid:"required"
  string name = 2; // @gotags: valid:"required,minstringlength(1)"
  string desc = 3; // @gotags: valid:"required,minstringlength(1)"
  string logo = 4; // @gotags: valid:"url,required"
  bool isPhysical = 5; // @gotags: valid:"bool"
  int64 capacity = 6; // @gotags: valid:"int"
}

message UpdateResponse {
  string status = 1;
  string response = 2;
}

// CreateWarehouse
message CreateRequest {
  string ownerID = 1; // @gotags: valid:"required"
  string name = 2; // @gotags: valid:"required,minstringlength(1)"
  string desc = 3; // @gotags: valid:"required,minstringlength(1)"
  string logo = 4; // @gotags: valid:"url,optional"
  bool isPhysical = 5; // @gotags: valid:"bool"
  int64 capacity = 6; // @gotags: valid:"int"
}

message CreateResponse {
  string warehouseID = 1;
}

// AddUserToWarehouse
message AddUsersRequest {
  string warehouseID = 1; // @gotags: valid:"required,minstringlength(1)"
  string userIds = 2; // @gotags: valid:"required,minstringlength(1)"
}

message AddUsersResponse {
  string status = 1;
  string response = 2;
}

// RemoveUserFromWarehouse
message RemoveUserRequest {
  string warehouseID = 1; // @gotags: valid:"required,minstringlength(1)"
  string userIds = 2; // @gotags: valid:"required,minstringlength(1)"
}

message RemoveUserResponse {
  string status = 1;
  string response = 2;
}

// DeleteWarehouse
message DeleteRequest {
  string warehouseID = 1; // @gotags: valid:"required,minstringlength(1)"
}

message DeleteResponse {
  string status = 1;
  string response = 2;
}


// Service

service WarehouseService {
  rpc GetInfo (GetInfoRequest) returns (GetInfoResponse);
  rpc UpdateWarehouse (UpdateRequest) returns (UpdateResponse);
  rpc CreateWarehouse (CreateRequest) returns (CreateResponse);
  rpc AddUsersToWarehouse (AddUsersRequest) returns (AddUsersResponse);
  rpc RemoveUserFromWarehouse (RemoveUserRequest) returns (RemoveUserResponse);
  rpc DeleteWarehouse (DeleteRequest) returns (DeleteResponse);
}